{let e,t,r,o,n,l,s,f,i,h,w,d,a,u,_,c,S,g,v,y,b,m,j,x,O,P;s=Object.getPrototypeOf,i={},h=s(f={isConnected:1}),w=s(s),d=(e,t,r,o)=>(e??(setTimeout(r,o),new Set)).add(t),a=(e,t,o)=>{let n=r;r=t;try{return e(o)}catch(e){return console.error(e),o}finally{r=n}},u=e=>e.filter(e=>e.t?.isConnected),_=e=>n=d(n,e,()=>{for(let e of n)e.o=u(e.o),e.l=u(e.l);n=l},1e3),c={get val(){return r?.i?.add(this),this.h},get oldVal(){return r?.i?.add(this),this.u},set val(o){r?._?.add(this),o!==this.h&&(this.h=o,this.o.length+this.l.length?(t?.add(this),e=d(e,this,O)):this.u=o)}},S=e=>({__proto__:c,h:e,u:e,o:[],l:[]}),g=(e,t)=>{let r={i:new Set,_:new Set},n={f:e},l=o;o=[];let s=a(e,r,t);s=(s??document).nodeType?s:new Text(s);for(let e of r.i)r._.has(e)||(_(e),e.o.push(n));for(let e of o)e.t=s;return o=l,n.t=s},v=(e,t=S(),r)=>{let n={i:new Set,_:new Set},l={f:e,s:t};l.t=r??o?.push(l)??f,t.val=a(e,n,t.h);for(let e of n.i)n._.has(e)||(_(e),e.l.push(l));return t},y=(e,...t)=>{for(let r of t.flat(1/0)){let t=s(r??0),o=t===c?g(()=>r.val):t===w?g(r):r;o!=l&&e.append(o)}return e},b=(e,t,...r)=>{let[o,...n]=s(r[0]??0)===h?r:[{},...r],f=e?document.createElementNS(e,t):document.createElement(t);for(let[e,r]of Object.entries(o)){let o=t=>t?Object.getOwnPropertyDescriptor(t,e)??o(s(t)):l,n=t+","+e,h=i[n]??(i[n]=o(s(f))?.set??0),d=e.startsWith("on")?(t,r)=>{let o=e.slice(2);f.removeEventListener(o,r),f.addEventListener(o,t)}:h?h.bind(f):f.setAttribute.bind(f,e),a=s(r??0);e.startsWith("on")||a===w&&(r=v(r),a=c),a===c?g(()=>(d(r.val,r.u),f)):d(r)}return y(f,...n)},m=e=>({get:(t,r)=>b.bind(l,e,r)}),j=new Proxy(e=>new Proxy(b,m(e)),m()),x=(e,t)=>t?t!==e&&e.replaceWith(t):e.remove(),O=()=>{let r=0,o=[...e].filter(e=>e.h!==e.u);do{t=new Set;for(let e of new Set(o.flatMap(e=>e.l=u(e.l))))v(e.f,e.s,e.t),e.t=l}while(++r<100&&(o=[...t]).length);let n=[...e].filter(e=>e.h!==e.u);e=l;for(let e of new Set(n.flatMap(e=>e.o=u(e.o))))x(e.t,g(e.f,e.t)),e.t=l;for(let e of n)e.u=e.h},P={add:y,tags:j,state:S,derive:v,hydrate:(e,t)=>x(e,g(t,e))},window.van=P;}