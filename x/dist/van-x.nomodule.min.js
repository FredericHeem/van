{let e,t,{fromEntries:r,entries:o,keys:l,getPrototypeOf:n}=Object,{get:f,set:i,deleteProperty:a,ownKeys:s}=Reflect,{state:y,derive:c,add:b,tags:d}=van,m=n(y()),g=1e3,u=Symbol(),S=Symbol(),w=Symbol(),O=Symbol(),j=Symbol(),p=Symbol(),P=e=>(e[w]=1,e),v=e=>e?.[w]?c(()=>A(e())):y(A(e)),A=e=>{if(!(e instanceof Object)||e[u])return e;let t=new Proxy((e[u]=r(o(e).map(([e,t])=>[e,v(t)])),e[S]=e,e[O]=[],e[j]=y(1),e),{get:(e,r)=>n(e[u][r]??0)===m?e[u][r].val:("length"===r&&e[j].val,f(e,r,t)),set(e,r,o){let l=e[u];if(r in l)return l[r].val=A(o),1;let n=r in e,f=n&&"length"===r&&o!==e.length;return i(e,r,o)?(n?f&&++e[j].val:i(l,r,v(o))&&(++e[j].val,K(t,r,l[r])),1):void 0},deleteProperty:(e,t)=>(a(e[u],t)&&N(e,t),a(e,t)&&++e[j].val),ownKeys:e=>(e[j].val,s(e))});return t},D=e=>e[u],_=e=>new Proxy(e[u],{get:(e,t)=>e[t].rawVal}),h=e=>e[O]=e[O].filter(e=>e.t.isConnected),x=(e,t,r,o)=>()=>{let l=o(r,()=>delete e[t],t);return l[p]=t,l},J=(e,t,r,{t:o,f:n},f)=>{if(b(o,x(e,t,r,n)),!f&&Array.isArray(e)&&t!=e.length-1){let t={};for(let e of o.childNodes)t[e[p]]=e;let r=o.firstChild;for(let n of l(e))r===t[n]?r=r.nextSibling:o.insertBefore(t[n],r)}},K=(e,r,o)=>h(e).forEach(J.bind(t,e,r,o)),N=(e,t)=>{for(let r of h(e))[...r.t.childNodes].find(e=>e[p]===t)?.remove()},k=r=>(e??(setTimeout(()=>(e.forEach(h),e=t),g),e=new Set)).add(r),E=(e,t,r)=>{let l={t:e(),f:r};t[O].push(l),k(t);for(let[e,r]of o(t[u]))J(t,e,r,l,1);return l.t},F=(e,t)=>{let l=Array.isArray(e)?o(t(e.filter(e=>1))):t(o(e)),n=e[S],f=r(l),i=e[u],a=r(l.map(([e,t])=>{let r=i[e];return r?r.val=A(t):r=v(t),[e,r]}));for(let{t:t,f:r}of h(e)){let l={};for(let e of[...t.childNodes])e[p]in a?l[e[p]]=e:e.remove();let n=t.firstChild;for(let[f,i]of o(a))n===l[f]?n=n.nextSibling:t.insertBefore(l[f]??d.p(x(e,f,i,r)).firstChild,n)}for(let e in n)delete n[e];Array.isArray(n)&&(n.length=0);for(let e in f)n[e]=f[e];e[u]=a,++e[j].val},R=(e,t)=>e.every((e,r)=>e===t[r]),T=(e,t)=>{for(let[r,l]of o(t)){let t=e[r];t instanceof Object&&l instanceof Object?T(l,t):e[r]=l}for(let r in e)r in t||delete e[r];return R(l(e),l(t))||F(e,()=>t),e},q=e=>Array.isArray(e)?e.filter(()=>1).map(q):e instanceof Object?r(o(e).map(([e,t])=>[e,q(t)])):e,z=e=>JSON.stringify(q(e)),B=(e,t)=>T(e,JSON.parse(t));window.vanX={calc:P,reactive:A,stateFields:D,raw:_,list:E,replace:F,stringify:z,parse:B,assign:T}}